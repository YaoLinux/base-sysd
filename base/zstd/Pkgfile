description="Zstandard - Fast real-time compression algorithm"
url="https://www.zstd.net/"

packager="Yaolinux Team"
maintainer="rems"

makedepends=(zlib xz lz4)

name=zstd
version=1.4.5

source=(https://github.com/facebook/zstd/releases/download/v$version/zstd-$version.tar.gz)

build() {

mkdir -v build && cd build

meson --prefix=/usr \
      -Dbin_programs=true \
      -Dbin_contrib=true \
      -Dmulti_thread=enabled \
      ../$name-$version/build/meson

ninja
DESTDIR=$PKG ninja install

mkdir $PKG/lib

mv -v $PKG/usr/lib/libzstd.so.* $PKG/lib
ln -sfv ../../lib/$(readlink $PKG/usr/lib/libzstd.so) $PKG/usr/lib/libzstd.so

}
